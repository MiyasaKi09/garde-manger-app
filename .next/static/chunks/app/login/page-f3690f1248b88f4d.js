(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{1461:function(e,t,n){Promise.resolve().then(n.bind(n,5235))},5235:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var r=n(7437),a=n(2265),s=n(6463),i=n(5626);function o(){let e=(0,s.useRouter)(),[t,n]=(0,a.useState)(""),[o,u]=(0,a.useState)(""),[l,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),f=async n=>{n.preventDefault(),c(!0),m("");try{let{data:n,error:r}=await i.OQ.auth.signInWithPassword({email:t,password:o});r?m(r.message):e.push("/")}catch(e){m("Une erreur est survenue")}finally{c(!1)}},g=async()=>{c(!0),m(""),p("");try{let{error:e}=await i.OQ.auth.signInWithOtp({email:t,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});e?m(e.message):p("V\xe9rifiez votre email pour le lien de connexion !")}catch(e){m("Une erreur est survenue")}finally{c(!1)}};return(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"calc(100vh - 100px)",padding:"2rem"},children:(0,r.jsxs)("div",{className:"card",style:{width:"100%",maxWidth:"400px",padding:"2rem"},children:[(0,r.jsx)("h1",{style:{textAlign:"center",marginBottom:"2rem"},children:"\uD83C\uDF44 Connexion \xe0 Myko"}),d&&(0,r.jsx)("div",{style:{padding:"1rem",background:"#fee",color:"#c00",borderRadius:"4px",marginBottom:"1rem"},children:d}),h&&(0,r.jsx)("div",{style:{padding:"1rem",background:"#efe",color:"#060",borderRadius:"4px",marginBottom:"1rem"},children:h}),(0,r.jsxs)("form",{onSubmit:f,children:[(0,r.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{id:"email",type:"email",className:"input",value:t,onChange:e=>n(e.target.value),required:!0,placeholder:"votre@email.com"})]}),(0,r.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,r.jsx)("label",{htmlFor:"password",children:"Mot de passe"}),(0,r.jsx)("input",{id:"password",type:"password",className:"input",value:o,onChange:e=>u(e.target.value),required:!0,placeholder:"••••••••"})]}),(0,r.jsx)("button",{type:"submit",className:"btn",disabled:l,style:{width:"100%",marginBottom:"1rem"},children:l?"Connexion...":"Se connecter"}),(0,r.jsx)("button",{type:"button",className:"btn secondary",onClick:g,disabled:l||!t,style:{width:"100%"},children:"Envoyer un lien magique"})]}),(0,r.jsxs)("p",{style:{textAlign:"center",marginTop:"2rem",fontSize:"0.9rem",color:"#666"},children:["Pas encore de compte ?",(0,r.jsx)("br",{}),"Contactez l'administrateur"]})]})})}},5626:function(e,t,n){"use strict";n.d(t,{OQ:function(){return i}});var r=n(6887);let a="https://yylkwfikfbottngglaxj.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl5bGt3ZmlrZmJvdHRuZ2dsYXhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1NjUwNzAsImV4cCI6MjA3MjE0MTA3MH0.h-GTmBH9onVHNJLLuafw9jwS9G8azVaQGelf-oUK-xc",i=null;if(a&&s)try{console.log("\uD83D\uDD17 Connexion \xe0 Supabase r\xe9el:",a),i=(0,r.eI)(a,s,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}catch(e){console.error("[Supabase] Erreur lors de la cr\xe9ation du client",e instanceof Error?e:Error(String(e)))}else{let e=[!a&&"NEXT_PUBLIC_SUPABASE_URL",!s&&"NEXT_PUBLIC_SUPABASE_ANON_KEY"].filter(Boolean);Error("Supabase non configur\xe9. Variables manquantes: ".concat(e.join(", ")))}},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[887,971,23,744],function(){return e(e.s=1461)}),_N_E=e.O()}]);