(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{9283:function(e,t,n){Promise.resolve().then(n.bind(n,8304))},8304:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var i=n(7437),o=n(2265),r=n(5626),a=n(7138);function s(){let[e,t]=(0,o.useState)([]);(0,o.useEffect)(()=>{(async()=>{let{data:e,error:n}=await r.OQ.from("inventory_lots").select("id, qty, unit, dlc, product:products_catalog(id,name,category), location:locations(id,name,icon)").order("dlc",{ascending:!0});n||t(e||[])})()},[]);let n=(0,o.useMemo)(()=>{let t=new Map;for(let i of e){var n;let e=null===(n=i.product)||void 0===n?void 0:n.id;if(!e)continue;t.has(e)||t.set(e,{id:e,name:i.product.name,category:i.product.category,total:0,unit:i.unit,samples:[]});let o=t.get(e);o.total+=Number(i.qty||0),o.unit=o.unit||i.unit,o.samples.push(i)}return Array.from(t.values()).sort((e,t)=>e.name.localeCompare(t.name))},[e]);return(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{children:"Produits"}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(180px,1fr))",gap:12},children:n.map(e=>(0,i.jsxs)(a.default,{href:"/produits/".concat(e.id),className:"card",style:{textDecoration:"none",color:"inherit"},children:[(0,i.jsx)("strong",{children:e.name}),(0,i.jsxs)("div",{style:{opacity:.7,marginTop:4},children:[e.total," ",e.unit]}),(0,i.jsx)("div",{style:{marginTop:6,fontSize:12,opacity:.7},children:e.category||"â€”"})]},e.id))})]})}},5626:function(e,t,n){"use strict";n.d(t,{OQ:function(){return a}});var i=n(6887);let o="https://yylkwfikfbottngglaxj.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl5bGt3ZmlrZmJvdHRuZ2dsYXhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1NjUwNzAsImV4cCI6MjA3MjE0MTA3MH0.h-GTmBH9onVHNJLLuafw9jwS9G8azVaQGelf-oUK-xc",a=null;if(o&&r)try{console.log("\uD83D\uDD17 Connexion \xe0 Supabase r\xe9el:",o),a=(0,i.eI)(o,r,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}catch(e){console.error("[Supabase] Erreur lors de la cr\xe9ation du client",e instanceof Error?e:Error(String(e)))}else{let e=[!o&&"NEXT_PUBLIC_SUPABASE_URL",!r&&"NEXT_PUBLIC_SUPABASE_ANON_KEY"].filter(Boolean);Error("Supabase non configur\xe9. Variables manquantes: ".concat(e.join(", ")))}}},function(e){e.O(0,[887,138,971,23,744],function(){return e(e.s=9283)}),_N_E=e.O()}]);