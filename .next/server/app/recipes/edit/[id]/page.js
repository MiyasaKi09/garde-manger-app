(()=>{var e={};e.id=418,e.ids=[418],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},1526:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>s.ZP,__next_app__:()=>d,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),i(1699),i(3909),i(6926),i(5866);var n=i(3191),a=i(8716),s=i(5383),r=i(5231),l={};for(let e in r)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>r[e]);i.d(t,l);let o=["",{children:["recipes",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,1699)),"/workspaces/garde-manger-app/app/recipes/edit/[id]/page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,3909)),"/workspaces/garde-manger-app/app/layout.js"],error:[()=>Promise.resolve().then(i.bind(i,6926)),"/workspaces/garde-manger-app/app/error.jsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/garde-manger-app/app/recipes/edit/[id]/page.js"],u="/recipes/edit/[id]/page",d={require:i,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/recipes/edit/[id]/page",pathname:"/recipes/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},1679:(e,t,i)=>{Promise.resolve().then(i.bind(i,3815))},3815:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i(326),a=i(7577),s=i(5047),r=i(9813),l=i(434);function o(){let e=(0,s.useRouter)(),t=(0,s.useParams)(),i="new"===t.id,o=i?null:t.id,c=(0,r.createClientComponentClient)(),[u,d]=(0,a.useState)(!i),[m,p]=(0,a.useState)(!1),[g,h]=(0,a.useState)("basic"),[x,j]=(0,a.useState)({title:"",description:"",category:"",difficulty:"moyen",servings:4,prep_min:15,cook_min:30,total_min:45,is_veg:!1,is_divisible:!0,tags:[],image_url:"",source_canonical_url:"",author:"",nutrition:{macros:{calories:"",proteins:"",carbs:"",fats:""},micros:{}}}),[v,f]=(0,a.useState)([]),[y,b]=(0,a.useState)({qty:"",unit:"g",name:"",note:"",is_optional:!1}),[N,_]=(0,a.useState)([]),[C,U]=(0,a.useState)(!1),[k,A]=(0,a.useState)(""),[q,w]=(0,a.useState)([]),[D,S]=(0,a.useState)({utensil_name:"",quantity:1,is_optional:!1,notes:""}),[V,P]=(0,a.useState)([]),[O,E]=(0,a.useState)(!1),[M,I]=(0,a.useState)(""),[F,$]=(0,a.useState)(""),[B,R]=(0,a.useState)("mg"),[T,z]=(0,a.useState)(!1),L=[{name:"Vitamine A",defaultUnit:"\xb5g",category:"Vitamines"},{name:"Vitamine D",defaultUnit:"\xb5g",category:"Vitamines"},{name:"Vitamine E",defaultUnit:"mg",category:"Vitamines"},{name:"Vitamine K",defaultUnit:"\xb5g",category:"Vitamines"},{name:"Vitamine C",defaultUnit:"mg",category:"Vitamines"},{name:"Vitamine B1 (Thiamine)",defaultUnit:"mg",category:"Vitamines"},{name:"Vitamine B2 (Riboflavine)",defaultUnit:"mg",category:"Vitamines"},{name:"Vitamine B3 (Niacine)",defaultUnit:"mg",category:"Vitamines"},{name:"Vitamine B5 (Acide pantoth\xe9nique)",defaultUnit:"mg",category:"Vitamines"},{name:"Vitamine B6",defaultUnit:"mg",category:"Vitamines"},{name:"Vitamine B9 (Folate)",defaultUnit:"\xb5g",category:"Vitamines"},{name:"Vitamine B12",defaultUnit:"\xb5g",category:"Vitamines"},{name:"Biotine (B8)",defaultUnit:"\xb5g",category:"Vitamines"},{name:"Calcium",defaultUnit:"mg",category:"Min\xe9raux"},{name:"Phosphore",defaultUnit:"mg",category:"Min\xe9raux"},{name:"Magn\xe9sium",defaultUnit:"mg",category:"Min\xe9raux"},{name:"Sodium",defaultUnit:"mg",category:"Min\xe9raux"},{name:"Potassium",defaultUnit:"mg",category:"Min\xe9raux"},{name:"Chlorure",defaultUnit:"mg",category:"Min\xe9raux"},{name:"Fer",defaultUnit:"mg",category:"Oligo-\xe9l\xe9ments"},{name:"Zinc",defaultUnit:"mg",category:"Oligo-\xe9l\xe9ments"},{name:"Cuivre",defaultUnit:"mg",category:"Oligo-\xe9l\xe9ments"},{name:"Mangan\xe8se",defaultUnit:"mg",category:"Oligo-\xe9l\xe9ments"},{name:"S\xe9l\xe9nium",defaultUnit:"\xb5g",category:"Oligo-\xe9l\xe9ments"},{name:"Iode",defaultUnit:"\xb5g",category:"Oligo-\xe9l\xe9ments"},{name:"Chrome",defaultUnit:"\xb5g",category:"Oligo-\xe9l\xe9ments"},{name:"Molybd\xe8ne",defaultUnit:"\xb5g",category:"Oligo-\xe9l\xe9ments"},{name:"Fibres alimentaires",defaultUnit:"g",category:"Autres"},{name:"Fibres solubles",defaultUnit:"g",category:"Autres"},{name:"Fibres insolubles",defaultUnit:"g",category:"Autres"},{name:"Sucres totaux",defaultUnit:"g",category:"Autres"},{name:"Sucres ajout\xe9s",defaultUnit:"g",category:"Autres"},{name:"Amidon",defaultUnit:"g",category:"Autres"},{name:"Cholest\xe9rol",defaultUnit:"mg",category:"Autres"},{name:"Acides gras satur\xe9s",defaultUnit:"g",category:"Acides gras"},{name:"Acides gras monoinsatur\xe9s",defaultUnit:"g",category:"Acides gras"},{name:"Acides gras polyinsatur\xe9s",defaultUnit:"g",category:"Acides gras"},{name:"Acides gras trans",defaultUnit:"g",category:"Acides gras"},{name:"Om\xe9ga 3 (EPA+DHA)",defaultUnit:"mg",category:"Acides gras"},{name:"Om\xe9ga 6",defaultUnit:"mg",category:"Acides gras"},{name:"Om\xe9ga 9",defaultUnit:"mg",category:"Acides gras"},{name:"Polyph\xe9nols",defaultUnit:"mg",category:"Antioxydants"},{name:"Flavono\xefdes",defaultUnit:"mg",category:"Antioxydants"},{name:"Carot\xe9no\xefdes",defaultUnit:"\xb5g",category:"Antioxydants"},{name:"Lycop\xe8ne",defaultUnit:"mg",category:"Antioxydants"},{name:"B\xeata-carot\xe8ne",defaultUnit:"\xb5g",category:"Antioxydants"},{name:"Lut\xe9ine",defaultUnit:"\xb5g",category:"Antioxydants"},{name:"Resv\xe9ratrol",defaultUnit:"mg",category:"Antioxydants"},{name:"Coenzyme Q10",defaultUnit:"mg",category:"Antioxydants"}];async function G(e){if(!e||e.length<2){P([]);return}E(!0);try{let{data:t}=await c.from("canonical_foods").select("id, canonical_name, category_id").ilike("canonical_name",`%${e}%`).limit(5),{data:i}=await c.from("generic_products").select("id, name, category_id").ilike("name",`%${e}%`).limit(5),n=[...(t||[]).map(e=>({id:e.id,name:e.canonical_name,type:"canonical",category_id:e.category_id})),...(i||[]).map(e=>({id:e.id,name:e.name,type:"generic",category_id:e.category_id}))];P(n)}catch(e){console.error("Erreur recherche produits:",e)}finally{E(!1)}}function Q(e,t,i){let n=[...N];n[e][t]=i,_(n)}async function Z(){if(!x.title){alert("Le titre est obligatoire");return}p(!0);try{let t=o,n=null;if(x.nutrition){let e={},t={};x.nutrition.macros&&Object.entries(x.nutrition.macros).forEach(([t,i])=>{i&&""!==i&&(e[t]=i)}),x.nutrition.micros&&Object.entries(x.nutrition.micros).forEach(([e,i])=>{i&&i.value&&""!==i.value&&(t[e]=i)}),(Object.keys(e).length>0||Object.keys(t).length>0)&&(n={macros:e,micros:t})}let a={...x,steps:C?k:null,tags:x.tags.length>0?x.tags:null,nutrition:n};if(i){let{data:e,error:i}=await c.from("recipes").insert([a]).select().single();if(i)throw i;t=e.id}else{let{error:e}=await c.from("recipes").update(a).eq("id",o);if(e)throw e}if(i||(await c.from("recipe_ingredients").delete().eq("recipe_id",t),await c.from("recipe_steps").delete().eq("recipe_id",t),await c.from("recipe_utensils").delete().eq("recipe_id",t)),v.length>0){let e=v.map((e,i)=>({recipe_id:t,qty:parseFloat(e.qty),unit:e.unit,note:e.note||null,is_optional:e.is_optional||!1,position:i,product_id:e.product_id||null})),{error:i}=await c.from("recipe_ingredients").insert(e);if(i)throw i}if(!C&&N.length>0){let e=N.map((e,i)=>({recipe_id:t,step_no:i+1,instruction:e.instruction,duration_min:e.duration_min?parseInt(e.duration_min):null,temperature:e.temperature?parseInt(e.temperature):null,temperature_unit:e.temperature_unit||"\xb0C"})),{error:i}=await c.from("recipe_steps").insert(e);if(i)throw i}if(q.length>0){let e=q.map(e=>({recipe_id:t,utensil_name:e.utensil_name,quantity:parseInt(e.quantity)||1,is_optional:e.is_optional||!1,notes:e.notes||null})),{error:i}=await c.from("recipe_utensils").insert(e);if(i)throw i}alert("Recette sauvegard\xe9e avec succ\xe8s!"),e.push("/recipes")}catch(e){console.error("Erreur sauvegarde:",e),alert("Erreur lors de la sauvegarde: "+e.message)}finally{p(!1)}}return u?n.jsx("div",{className:"recipes-container",children:n.jsx("div",{className:"loading-spinner",children:"⏳ Chargement..."})}):(0,n.jsxs)("div",{className:"recipes-container",children:[(0,n.jsxs)("div",{className:"recipes-header",children:[n.jsx("h1",{children:i?"➕ Nouvelle recette":"✏️ Modifier la recette"}),n.jsx(l.default,{href:"/recipes",className:"btn-secondary",children:"← Retour aux recettes"})]}),(0,n.jsxs)("div",{className:"edit-tabs",children:[n.jsx("button",{className:`tab-btn ${"basic"===g?"active":""}`,onClick:()=>h("basic"),children:"\uD83D\uDCDD Informations"}),n.jsx("button",{className:`tab-btn ${"ingredients"===g?"active":""}`,onClick:()=>h("ingredients"),children:"\uD83E\uDD55 Ingr\xe9dients"}),n.jsx("button",{className:`tab-btn ${"steps"===g?"active":""}`,onClick:()=>h("steps"),children:"\uD83D\uDCCB Instructions"}),n.jsx("button",{className:`tab-btn ${"tools"===g?"active":""}`,onClick:()=>h("tools"),children:"\uD83D\uDD27 Ustensiles"}),n.jsx("button",{className:`tab-btn ${"nutrition"===g?"active":""}`,onClick:()=>h("nutrition"),children:"\uD83D\uDCCA Nutrition"})]}),(0,n.jsxs)("div",{className:"edit-content",children:["basic"===g&&(0,n.jsxs)("div",{className:"edit-section",children:[n.jsx("h2",{children:"Informations de base"}),(0,n.jsxs)("div",{className:"form-grid",children:[(0,n.jsxs)("div",{className:"form-group full-width",children:[n.jsx("label",{children:"Titre de la recette *"}),n.jsx("input",{type:"text",value:x.title,onChange:e=>j({...x,title:e.target.value}),placeholder:"Ex: Tarte aux pommes maison",className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group full-width",children:[n.jsx("label",{children:"Description"}),n.jsx("textarea",{value:x.description,onChange:e=>j({...x,description:e.target.value}),placeholder:"Une d\xe9licieuse tarte aux pommes avec une p\xe2te croustillante...",className:"form-textarea",rows:"3"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Cat\xe9gorie"}),(0,n.jsxs)("select",{value:x.category,onChange:e=>j({...x,category:e.target.value}),className:"form-select",children:[n.jsx("option",{value:"",children:"-- S\xe9lectionner --"}),n.jsx("option",{value:"entr\xe9e",children:"Entr\xe9e"}),n.jsx("option",{value:"plat",children:"Plat principal"}),n.jsx("option",{value:"dessert",children:"Dessert"}),n.jsx("option",{value:"collation",children:"Collation"}),n.jsx("option",{value:"boisson",children:"Boisson"}),n.jsx("option",{value:"sauce",children:"Sauce"}),n.jsx("option",{value:"accompagnement",children:"Accompagnement"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Difficult\xe9"}),(0,n.jsxs)("select",{value:x.difficulty,onChange:e=>j({...x,difficulty:e.target.value}),className:"form-select",children:[n.jsx("option",{value:"facile",children:"Facile"}),n.jsx("option",{value:"moyen",children:"Moyen"}),n.jsx("option",{value:"difficile",children:"Difficile"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Nombre de portions"}),n.jsx("input",{type:"number",value:x.servings,onChange:e=>j({...x,servings:parseInt(e.target.value)||0}),min:"1",className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Temps de pr\xe9paration (min)"}),n.jsx("input",{type:"number",value:x.prep_min,onChange:e=>j({...x,prep_min:parseInt(e.target.value)||0}),min:"0",className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Temps de cuisson (min)"}),n.jsx("input",{type:"number",value:x.cook_min,onChange:e=>j({...x,cook_min:parseInt(e.target.value)||0}),min:"0",className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Temps total (min)"}),n.jsx("input",{type:"number",value:x.total_min,readOnly:!0,className:"form-input readonly"})]}),(0,n.jsxs)("div",{className:"form-group full-width",children:[n.jsx("label",{children:"URL de l\\'image"}),n.jsx("input",{type:"url",value:x.image_url,onChange:e=>j({...x,image_url:e.target.value}),placeholder:"https://...",className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Source/URL originale"}),n.jsx("input",{type:"url",value:x.source_canonical_url,onChange:e=>j({...x,source_canonical_url:e.target.value}),placeholder:"https://...",className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Auteur"}),n.jsx("input",{type:"text",value:x.author,onChange:e=>j({...x,author:e.target.value}),placeholder:"Nom de l\\'auteur",className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group full-width",children:[n.jsx("label",{children:"Tags (s\xe9par\xe9s par des virgules)"}),n.jsx("input",{type:"text",value:x.tags.join(", "),onChange:e=>j({...x,tags:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}),placeholder:"Ex: rapide, sans gluten, \xe9t\xe9",className:"form-input"})]}),n.jsx("div",{className:"form-group checkbox-group",children:(0,n.jsxs)("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:x.is_veg,onChange:e=>j({...x,is_veg:e.target.checked})}),n.jsx("span",{children:"\uD83C\uDF31 V\xe9g\xe9tarien"})]})}),n.jsx("div",{className:"form-group checkbox-group",children:(0,n.jsxs)("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:x.is_divisible,onChange:e=>j({...x,is_divisible:e.target.checked})}),n.jsx("span",{children:"Recette divisible"})]})})]})]}),"ingredients"===g&&(0,n.jsxs)("div",{className:"edit-section",children:[n.jsx("h2",{children:"Ingr\xe9dients"}),v.length>0&&n.jsx("div",{className:"ingredients-list-edit",children:v.map((e,t)=>(0,n.jsxs)("div",{className:"ingredient-item-edit",children:[n.jsx("span",{className:"ingredient-position",children:t+1}),(0,n.jsxs)("span",{className:"ingredient-qty",children:[e.qty," ",e.unit]}),(0,n.jsxs)("span",{className:"ingredient-name",children:[e.display_name||e.name,e.is_optional&&" (optionnel)"]}),e.note&&n.jsx("span",{className:"ingredient-note",children:e.note}),n.jsx("button",{onClick:()=>{f(v.filter((e,i)=>i!==t))},className:"btn-remove",title:"Supprimer",children:"✕"})]},e.id||t))}),(0,n.jsxs)("div",{className:"add-ingredient-form",children:[n.jsx("h3",{children:"Ajouter un ingr\xe9dient"}),(0,n.jsxs)("div",{className:"form-grid",children:[(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Quantit\xe9 *"}),n.jsx("input",{type:"number",value:y.qty,onChange:e=>b({...y,qty:e.target.value}),placeholder:"100",className:"form-input",step:"0.01"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Unit\xe9"}),(0,n.jsxs)("select",{value:y.unit,onChange:e=>b({...y,unit:e.target.value}),className:"form-select",children:[n.jsx("option",{value:"g",children:"g"}),n.jsx("option",{value:"kg",children:"kg"}),n.jsx("option",{value:"ml",children:"ml"}),n.jsx("option",{value:"l",children:"l"}),n.jsx("option",{value:"u",children:"unit\xe9(s)"}),n.jsx("option",{value:"cs",children:"c.\xe0.s"}),n.jsx("option",{value:"cc",children:"c.\xe0.c"}),n.jsx("option",{value:"pinc\xe9e",children:"pinc\xe9e"})]})]}),(0,n.jsxs)("div",{className:"form-group span-2",children:[n.jsx("label",{children:"Nom de l\\'ingr\xe9dient *"}),n.jsx("input",{type:"text",value:y.name,onChange:e=>{b({...y,name:e.target.value}),G(e.target.value)},placeholder:"Ex: Tomates cerises",className:"form-input"}),O&&n.jsx("span",{className:"searching",children:"Recherche..."}),V.length>0&&n.jsx("div",{className:"suggestions-dropdown",children:V.map(e=>(0,n.jsxs)("div",{className:"suggestion-item",onClick:()=>{b({...y,name:e.name}),P([])},children:[e.name,n.jsx("span",{className:"suggestion-type",children:e.type})]},`${e.type}-${e.id}`))})]}),(0,n.jsxs)("div",{className:"form-group span-2",children:[n.jsx("label",{children:"Note (optionnel)"}),n.jsx("input",{type:"text",value:y.note,onChange:e=>b({...y,note:e.target.value}),placeholder:"Ex: coup\xe9es en deux",className:"form-input"})]}),n.jsx("div",{className:"form-group checkbox-group",children:(0,n.jsxs)("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:y.is_optional,onChange:e=>b({...y,is_optional:e.target.checked})}),n.jsx("span",{children:"Optionnel"})]})}),n.jsx("div",{className:"form-group",children:n.jsx("button",{onClick:function(){if(!y.name||!y.qty){alert("Veuillez remplir au moins le nom et la quantit\xe9");return}f([...v,{...y,id:`new-${Date.now()}`,position:v.length}]),b({qty:"",unit:"g",name:"",note:"",is_optional:!1})},className:"btn-primary",type:"button",children:"➕ Ajouter"})})]})]})]}),"steps"===g&&(0,n.jsxs)("div",{className:"edit-section",children:[n.jsx("h2",{children:"Instructions"}),(0,n.jsxs)("div",{className:"steps-mode-selector",children:[(0,n.jsxs)("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",checked:C,onChange:()=>U(!0)}),n.jsx("span",{children:"Mode texte libre"})]}),(0,n.jsxs)("label",{className:"radio-label",children:[n.jsx("input",{type:"radio",checked:!C,onChange:()=>U(!1)}),n.jsx("span",{children:"Mode \xe9tapes structur\xe9es"})]})]}),C?(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Instructions (texte libre)"}),n.jsx("textarea",{value:k,onChange:e=>A(e.target.value),placeholder:"D\xe9crivez les \xe9tapes de pr\xe9paration...",className:"form-textarea",rows:"10"})]}):(0,n.jsxs)(n.Fragment,{children:[N.map((e,t)=>(0,n.jsxs)("div",{className:"step-item-edit",children:[(0,n.jsxs)("div",{className:"step-header",children:[(0,n.jsxs)("span",{className:"step-number",children:["\xc9tape ",t+1]}),n.jsx("button",{onClick:()=>{_(N.filter((e,i)=>i!==t))},className:"btn-remove",title:"Supprimer cette \xe9tape",children:"✕"})]}),(0,n.jsxs)("div",{className:"form-grid",children:[(0,n.jsxs)("div",{className:"form-group full-width",children:[n.jsx("label",{children:"Instruction"}),n.jsx("textarea",{value:e.instruction,onChange:e=>Q(t,"instruction",e.target.value),placeholder:"D\xe9crivez cette \xe9tape...",className:"form-textarea",rows:"2"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Dur\xe9e (min)"}),n.jsx("input",{type:"number",value:e.duration_min||"",onChange:e=>Q(t,"duration_min",e.target.value),placeholder:"10",className:"form-input",min:"0"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Temp\xe9rature"}),n.jsx("input",{type:"number",value:e.temperature||"",onChange:e=>Q(t,"temperature",e.target.value),placeholder:"180",className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Unit\xe9 temp."}),(0,n.jsxs)("select",{value:e.temperature_unit||"\xb0C",onChange:e=>Q(t,"temperature_unit",e.target.value),className:"form-select",children:[n.jsx("option",{value:"\xb0C",children:"\xb0C"}),n.jsx("option",{value:"\xb0F",children:"\xb0F"})]})]})]})]},e.id||t)),n.jsx("button",{onClick:function(){let e={id:`new-${Date.now()}`,step_no:N.length+1,instruction:"",duration_min:null,temperature:null,temperature_unit:"\xb0C"};_([...N,e])},className:"btn-secondary",type:"button",children:"➕ Ajouter une \xe9tape"})]})]}),"tools"===g&&(0,n.jsxs)("div",{className:"edit-section",children:[n.jsx("h2",{children:"Ustensiles"}),q.length>0&&n.jsx("div",{className:"utensils-list-edit",children:q.map((e,t)=>(0,n.jsxs)("div",{className:"utensil-item-edit",children:[n.jsx("span",{className:"utensil-qty",children:e.quantity>1&&`${e.quantity}\xd7 `}),(0,n.jsxs)("span",{className:"utensil-name",children:[e.utensil_name,e.is_optional&&" (optionnel)"]}),e.notes&&n.jsx("span",{className:"utensil-note",children:e.notes}),n.jsx("button",{onClick:()=>{w(q.filter((e,i)=>i!==t))},className:"btn-remove",title:"Supprimer",children:"✕"})]},e.id||t))}),(0,n.jsxs)("div",{className:"add-utensil-form",children:[n.jsx("h3",{children:"Ajouter un ustensile"}),(0,n.jsxs)("div",{className:"form-grid",children:[(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Nom de l\\'ustensile *"}),n.jsx("input",{type:"text",value:D.utensil_name,onChange:e=>S({...D,utensil_name:e.target.value}),placeholder:"Ex: Po\xeale",className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Quantit\xe9"}),n.jsx("input",{type:"number",value:D.quantity,onChange:e=>S({...D,quantity:e.target.value}),min:"1",className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Notes"}),n.jsx("input",{type:"text",value:D.notes,onChange:e=>S({...D,notes:e.target.value}),placeholder:"Ex: 28 cm de diam\xe8tre",className:"form-input"})]}),n.jsx("div",{className:"form-group checkbox-group",children:(0,n.jsxs)("label",{className:"checkbox-label",children:[n.jsx("input",{type:"checkbox",checked:D.is_optional,onChange:e=>S({...D,is_optional:e.target.checked})}),n.jsx("span",{children:"Optionnel"})]})}),n.jsx("div",{className:"form-group",children:n.jsx("button",{onClick:function(){if(!D.utensil_name){alert("Veuillez entrer le nom de l'ustensile");return}w([...q,{...D,id:`new-${Date.now()}`}]),S({utensil_name:"",quantity:1,is_optional:!1,notes:""})},className:"btn-primary",type:"button",children:"➕ Ajouter"})})]})]})]}),"nutrition"===g&&(0,n.jsxs)("div",{className:"edit-section",children:[n.jsx("h2",{children:"Informations nutritionnelles"}),n.jsx("p",{className:"info-text",children:"Les informations nutritionnelles peuvent \xeatre calcul\xe9es automatiquement \xe0 partir des ingr\xe9dients ou saisies manuellement. Toutes les valeurs sont par portion."}),(0,n.jsxs)("div",{className:"nutrition-section",children:[n.jsx("h3",{children:"Macronutriments (par portion)"}),(0,n.jsxs)("div",{className:"form-grid",children:[(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Calories (kcal)"}),n.jsx("input",{type:"number",value:x.nutrition?.macros?.calories||"",onChange:e=>j({...x,nutrition:{...x.nutrition,macros:{...x.nutrition?.macros,calories:e.target.value}}}),className:"form-input"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Prot\xe9ines (g)"}),n.jsx("input",{type:"number",value:x.nutrition?.macros?.proteins||"",onChange:e=>j({...x,nutrition:{...x.nutrition,macros:{...x.nutrition?.macros,proteins:e.target.value}}}),className:"form-input",step:"0.1"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Glucides (g)"}),n.jsx("input",{type:"number",value:x.nutrition?.macros?.carbs||"",onChange:e=>j({...x,nutrition:{...x.nutrition,macros:{...x.nutrition?.macros,carbs:e.target.value}}}),className:"form-input",step:"0.1"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Lipides (g)"}),n.jsx("input",{type:"number",value:x.nutrition?.macros?.fats||"",onChange:e=>j({...x,nutrition:{...x.nutrition,macros:{...x.nutrition?.macros,fats:e.target.value}}}),className:"form-input",step:"0.1"})]})]})]}),(0,n.jsxs)("div",{className:"nutrition-section",children:[n.jsx("h3",{children:"Micronutriments (par portion)"}),x.nutrition?.micros&&Object.keys(x.nutrition.micros).length>0&&n.jsx("div",{className:"micros-list",children:Object.entries(x.nutrition.micros).map(([e,t])=>(0,n.jsxs)("div",{className:"micro-item",children:[n.jsx("span",{className:"micro-name",children:e}),(0,n.jsxs)("span",{className:"micro-value",children:[t.value," ",t.unit]}),n.jsx("button",{type:"button",onClick:()=>(function(e){let t={...x.nutrition};t.micros&&delete t.micros[e],j({...x,nutrition:t})})(e),className:"btn-remove-micro",title:"Supprimer",children:"✕"})]},e))}),(0,n.jsxs)("div",{className:"add-micro-form",children:[n.jsx("h4",{children:"Ajouter un micronutriment"}),(0,n.jsxs)("div",{className:"form-grid",children:[(0,n.jsxs)("div",{className:"form-group span-2",style:{position:"relative"},children:[n.jsx("label",{children:"Nom du nutriment"}),n.jsx("input",{type:"text",value:M,onChange:e=>{I(e.target.value),z(!0)},onFocus:()=>z(!0),placeholder:"Ex: Vitamine C, Fer, Calcium...",className:"form-input"}),T&&(0,n.jsxs)("div",{className:"micro-suggestions-dropdown",children:[(0,n.jsxs)("div",{className:"suggestions-header",children:[n.jsx("small",{children:"Suggestions courantes (cliquez pour s\xe9lectionner)"}),n.jsx("button",{type:"button",onClick:()=>z(!1),className:"close-suggestions",children:"✕"})]}),n.jsx("div",{className:"suggestions-content",children:["Vitamines","Min\xe9raux","Oligo-\xe9l\xe9ments","Acides gras","Antioxydants","Autres"].map(e=>{let t=L.filter(t=>t.category===e).filter(e=>!M||e.name.toLowerCase().includes(M.toLowerCase())).filter(e=>!x.nutrition?.micros||!x.nutrition.micros[e.name]);return 0===t.length?null:(0,n.jsxs)("div",{className:"suggestion-category",children:[n.jsx("div",{className:"category-header",children:e}),n.jsx("div",{className:"suggestions-grid",children:t.map(e=>(0,n.jsxs)("button",{type:"button",className:"micro-suggestion-btn",onClick:()=>{I(e.name),R(e.defaultUnit),z(!1)},children:[n.jsx("span",{className:"suggestion-name",children:e.name}),n.jsx("span",{className:"suggestion-unit",children:e.defaultUnit})]},e.name))})]},e)})})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Valeur"}),n.jsx("input",{type:"number",value:F,onChange:e=>$(e.target.value),placeholder:"0",className:"form-input",step:"0.01"})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"Unit\xe9"}),(0,n.jsxs)("select",{value:B,onChange:e=>R(e.target.value),className:"form-select",children:[n.jsx("option",{value:"g",children:"g"}),n.jsx("option",{value:"mg",children:"mg"}),n.jsx("option",{value:"\xb5g",children:"\xb5g (mcg)"}),n.jsx("option",{value:"UI",children:"UI"}),n.jsx("option",{value:"%",children:"% AJR"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[n.jsx("label",{children:"\xa0"}),n.jsx("button",{type:"button",onClick:function(){if(!M||!F){alert("Veuillez s\xe9lectionner un nutriment et entrer une valeur");return}let e={...x.nutrition};e.micros||(e.micros={}),e.micros[M]={value:parseFloat(F),unit:B},j({...x,nutrition:e}),I(""),$(""),R("mg"),z(!1)},className:"btn-primary",children:"➕ Ajouter"})]})]}),n.jsx("div",{className:"micro-info",children:n.jsx("small",{children:"\uD83D\uDCA1 Astuce : Vous pouvez ajouter n'importe quel nutriment ou compos\xe9 nutritionnel (vitamines, min\xe9raux, acides amin\xe9s, antioxydants, etc.)"})})]})]})]})]}),(0,n.jsxs)("div",{className:"edit-actions-bar",children:[n.jsx(l.default,{href:"/recipes",className:"btn-secondary",children:"✕ Annuler"}),n.jsx("button",{onClick:Z,disabled:m||!x.title,className:"btn-primary",children:m?"⏳ Sauvegarde...":"\uD83D\uDCBE Sauvegarder la recette"})]})]})}i(2494)},1699:(e,t,i)=>{"use strict";i.r(t),i.d(t,{$$typeof:()=>r,__esModule:()=>s,default:()=>l});var n=i(8570);let a=(0,n.createProxy)(String.raw`/workspaces/garde-manger-app/app/recipes/edit/[id]/page.js`),{__esModule:s,$$typeof:r}=a;a.default;let l=(0,n.createProxy)(String.raw`/workspaces/garde-manger-app/app/recipes/edit/[id]/page.js#default`)},2494:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[948,618,813,146],()=>i(1526));module.exports=n})();