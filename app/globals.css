/* ==========================================================================
   MYKO V2 — HOOKS MK-* (V5 CONSOLIDÉ, PROPRE)
   ========================================================================== */

/* === 0) Variables layout === */
:root{
  --maxw: 1400px;       /* aligné sur .container */
  --header-h: 60px;     /* hauteur du header */
  --ctl-h: 36px;        /* hauteur normalisée des liens/pilules/boutons */

  /* Accents (mappés sur ta palette existante) */
  --accent: 120 36% 35%;        /* proche forest-500 en HSL */
  --accent-2: 27 80% 56%;       /* autumn-orange */
  --accent-3: 206 70% 40%;      /* proche info */

  /* Alias utiles */
  --bg: var(--cream);
  --bg-2: var(--earth-50);
  --ink: var(--forest-800);
  --muted: var(--medium-gray);
  --line: var(--soft-gray);

  --glass: rgba(255,255,255,0.55);
  --glass-border: rgba(10,14,10,0.08);
}

/* === 1) Fond mycélien (sous le décor existant du body) === */
.mk-mycelium-bg{
  position:fixed; inset:0; z-index:-1; pointer-events:none;
  opacity:.55;
  background:
    radial-gradient(800px 400px at 20% 10%, rgba(76,175,80,0.08), transparent 60%),
    radial-gradient(700px 350px at 80% -5%, rgba(255,152,0,0.08), transparent 60%),
    radial-gradient(900px 480px at -10% 80%, rgba(33,150,243,0.07), transparent 60%);
  mask-image: radial-gradient(1200px 900px at 50% 10%, rgba(0,0,0,.9), transparent 80%);
}
.mk-mycelium-bg::after{
  content:"";
  position:absolute; inset:0; opacity:.3;
  background:
    repeating-linear-gradient(115deg, rgba(0,0,0,.02) 0 2px, transparent 2px 8px),
    repeating-linear-gradient(65deg, rgba(0,0,0,.015) 0 3px, transparent 3px 10px);
  mix-blend-mode:multiply;
}

/* === 2) Header FLAT & CENTER (intégré, centré, régulier) === */
.mk-header{
  position: sticky; top: 0; z-index: 40;
  height: var(--header-h);
  background: var(--warm-white);
  border-bottom: 1px solid var(--soft-gray);
  box-shadow: 0 2px 8px rgba(0,0,0,.04);
}
.header-container.mk-container{
  height: var(--header-h);
  display:flex; align-items:center; justify-content:space-between;
  gap: var(--space-md);
  max-width: var(--maxw);
  margin: 0 auto;
  padding-left: var(--space-xl);
  padding-right: var(--space-xl);
}
@media (max-width: 768px){
  .header-container.mk-container{
    padding-left: var(--space-md);
    padding-right: var(--space-md);
  }
}

/* Logo */
.mk-logo{ display:flex; align-items:center; gap:var(--space-md); }
.mk-logo-link{ display:flex; align-items:center; gap:.6rem; text-decoration:none; color:inherit; }
.mk-icon{ position:relative; width:28px; height:28px; }
.mk-spore{ position:absolute; width:6px; height:6px; border-radius:50%; background:hsl(var(--accent)); }
.mk-spore:nth-child(1){ top:2px; left:10px; background:hsl(var(--accent-2)); }
.mk-spore:nth-child(2){ bottom:3px; right:3px; background:hsl(var(--accent)); }
.mk-spore:nth-child(3){ top:12px; left:-2px; background:hsl(var(--accent-3)); }
.mk-mycelium-line{ position:absolute; inset:3px; border-radius:50%; box-shadow: inset 0 0 0 1.5px rgba(0,0,0,.08); }
.mk-wordmark{
  font-family: "Crimson Text", Georgia, serif;
  font-size: 1.35rem;
  letter-spacing: .01em;
  color: var(--forest-700);
}

/* Nav — tout à la même hauteur */
.mk-nav{
  display:flex; align-items:center; gap:.35rem .5rem; margin-left:.5rem; flex-wrap:wrap;
}
.mk-nav-link{
  display:inline-flex; align-items:center; gap:.5rem;
  height: var(--ctl-h);
  padding: 0 .75rem;           /* seulement horizontal */
  border-radius: 10px;
  color: var(--forest-700);
  background: transparent;
  line-height: 1;
  position: relative;
  transition: color var(--transition-fast), background-color var(--transition-fast);
}
.mk-nav-ico{ width:18px; height:18px; display:inline-grid; place-items:center; }

/* Hover souligné (pas de fond gris) */
.mk-nav-link::after{
  content:""; position:absolute; left:.75rem; right:.75rem; bottom:.35rem;
  height:2px; border-radius:2px; transform: scaleX(0);
  background: linear-gradient(90deg, var(--forest-400), var(--forest-300));
  transition: transform 160ms ease; transform-origin: left;
}
.mk-nav-link:hover{ color: var(--forest-600); }
.mk-nav-link:hover::after{ transform: scaleX(1); }

/* Actif discret et cohérent avec tes cartes */
.mk-nav-link[aria-current="page"]{
  background: linear-gradient(145deg, var(--warm-white), rgba(255,255,255,.96));
  border: 1px solid rgba(139,149,109,.18);
  box-shadow: var(--shadow-xs);
  color: var(--forest-700);
}

/* Actions droites — hauteur normalisée */
.mk-actions{ display:flex; align-items:center; gap:.6rem; }

/* Pilule saison */
.mk-season{
  display:inline-flex; align-items:center; gap:.35rem;
  height: var(--ctl-h); padding: 0 .66rem;
  border-radius: 999px;
  background: rgba(214,148,18,.12);
  border: 1px solid rgba(214,148,18,.28);
  color: #8A6A2A; font-size:.9rem; line-height:1;
}
.mk-season-ico{ line-height:1; }

/* Bouton HeaderAuth (a ou button) */
.header-actions .btn,
.header-actions button,
.header-actions a[role="button"],
.header-actions a.btn{
  display:inline-flex; align-items:center; justify-content:center;
  height: var(--ctl-h); padding: 0 .9rem;
  border-radius: 999px;
  background: linear-gradient(135deg, var(--forest-500), var(--forest-600));
  color:#fff; border:none;
  box-shadow: 0 6px 14px rgba(58,107,30,.15);
  line-height:1; text-decoration:none;
}
.header-actions .btn:hover,
.header-actions button:hover,
.header-actions a[role="button"]:hover,
.header-actions a.btn:hover{
  background: linear-gradient(135deg, var(--forest-600), var(--forest-500));
  box-shadow: 0 10px 24px rgba(58,107,30,.18);
}

/* === 3) Main & utilitaires === */
.mk-main{ min-height: calc(100svh - var(--header-h) - 72px); padding: clamp(16px, 3vw, 28px); }
.main-container{ max-width: var(--maxw); margin: 0 auto; }
.mk-card{
  background: linear-gradient(145deg, var(--warm-white), rgba(255,255,255,.96));
  border: 1px solid rgba(139,149,109,.14);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-sm);
  padding: 1rem;
}
.mk-card:hover{ box-shadow: var(--shadow-md); border-color: var(--forest-200); }

/* Bandeau d’accueil (optionnel) */
.mk-hero{
  background: linear-gradient(0deg, rgba(106,166,68,.07), rgba(106,166,68,.03));
  border: 1px solid rgba(106,166,68,.18);
  border-radius: var(--radius-lg);
  padding: clamp(16px, 3vw, 24px);
  box-shadow: var(--shadow-xs);
}
.mk-hero h1{
  background: linear-gradient(135deg, var(--forest-800), var(--forest-600));
  -webkit-background-clip: text; background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom:.35rem;
}
.mk-hero p{ color: var(--forest-700); }

/* === 4) Loading (fallback Suspense) === */
.mk-loading{ display:grid; place-items:center; gap:1rem; padding: 3rem 0; color: var(--muted); }
.mk-loading-orb{ width:64px; height:18px; display:flex; justify-content:space-between; align-items:center; }
.mk-loading-orb > span{
  width:12px; height:12px; border-radius:50%;
  background: color-mix(in oklab, rgb(106,166,68) 30%, white);
  animation: mk-pulse 1.2s infinite ease-in-out;
}
.mk-loading-orb > span:nth-child(2){ animation-delay:.15s }
.mk-loading-orb > span:nth-child(3){ animation-delay:.3s }
@keyframes mk-pulse{ 0%,80%,100%{ transform:scale(.8); opacity:.6 } 40%{ transform:scale(1); opacity:1 } }
.mk-loading-text{ font-style:italic; font-family:"Crimson Text", Georgia, serif; }

/* === 5) Footer === */
.mk-footer{
  margin-top:2rem; border-top:1px solid var(--line);
  background: linear-gradient( to top, rgba(0,0,0,.03), transparent );
}
.mk-footer-inner{
  display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between;
  gap:.75rem; padding: 1rem var(--space-md) 1.25rem;
}
.mk-footline{ margin:0; color:var(--muted); display:flex; gap:.5rem; align-items:center; }
.mk-footmark{ font-weight:600; color: hsl(var(--accent)); }
.mk-footsep{ opacity:.4 }
.mk-footmotto{ font-family: "Crimson Text", Georgia, serif; font-style:italic; }
.mk-footer-nav{ display:flex; gap:.75rem; }
.mk-footer-link{ color:inherit; text-decoration:none; opacity:.85; padding:.25rem .5rem; border-radius:.4rem; }
.mk-footer-link:hover{ background:rgba(0,0,0,.05) }

/* === 6) Skip link / focus === */
.mk-skip{
  position:fixed; left:50%; transform:translateX(-50%);
  top:-40px; background:#fff; color:#000; padding:.5rem .75rem;
  border-radius:.5rem; border:1px solid var(--glass-border);
  box-shadow:var(--shadow-1); text-decoration:none; z-index:1000;
  transition: top var(--transition-fast);
}
.mk-skip:focus{ top:10px; outline:none; }
:focus-visible{
  outline: 2px solid hsl(var(--accent));
  outline-offset: 2px;
  border-radius:.35rem;
}

/* === 7) Dark mode propre === */
@media (prefers-color-scheme: dark){
  .mk-header{
    background: #121612;
    border-bottom: 1px solid rgba(255,255,255,.07);
    box-shadow: 0 2px 10px rgba(0,0,0,.5);
  }
  .mk-wordmark{ color: #e7efe3; }
  .mk-nav-link{ color: #e7efe3; }
  .mk-nav-link:hover{ color: #cfe4c8; }
  .mk-nav-link[aria-current="page"]{
    background: rgba(106,166,68,.14);
    border-color: rgba(106,166,68,.30);
    box-shadow: none;
  }
  .mk-season{
    background: rgba(214,148,18,.18);
    border-color: rgba(214,148,18,.35);
    color: #ffd7a1;
  }
  .mk-card{ background: #121612; border-color: rgba(255,255,255,.06); }
  .mk-footer{ background: linear-gradient( to top, rgba(255,255,255,.04), transparent ); }
}

/* === 8) Reduced motion === */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition:none !important; scroll-behavior:auto !important; }
}
