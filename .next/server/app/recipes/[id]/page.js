(()=>{var e={};e.id=836,e.ids=[836],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},2392:(e,s,n)=>{"use strict";n.r(s),n.d(s,{GlobalError:()=>r.ZP,__next_app__:()=>u,originalPathname:()=>d,pages:()=>o,routeModule:()=>p,tree:()=>c}),n(1694),n(3909),n(6926),n(5866);var i=n(3191),t=n(8716),r=n(5383),a=n(5231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);n.d(s,l);let c=["",{children:["recipes",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,1694)),"/workspaces/garde-manger-app/app/recipes/[id]/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,3909)),"/workspaces/garde-manger-app/app/layout.js"],error:[()=>Promise.resolve().then(n.bind(n,6926)),"/workspaces/garde-manger-app/app/error.jsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/workspaces/garde-manger-app/app/recipes/[id]/page.js"],d="/recipes/[id]/page",u={require:n,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/recipes/[id]/page",pathname:"/recipes/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8371:(e,s,n)=>{Promise.resolve().then(n.bind(n,3510))},3510:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>v});var i=n(326),t=n(7577),r=n(5047),a=n(4122);let l={g:"mass",kg:"mass",ml:"vol",cl:"vol",l:"vol",u:"count"},c={g:1,kg:1e3,ml:1,cl:10,l:1e3,u:1},o=e=>l[(e||"").toLowerCase()]||null,d=(e,s)=>Number(e)*(c[(s||"").toLowerCase()]||1),u=(e,s)=>Number(e)/(c[(s||"").toLowerCase()]||1);var p=n(8307),m=n(4019);let h=(e,s)=>{let n=[];for(let e=0;e<=s.length;e++)n[e]=[e];for(let s=0;s<=e.length;s++)n[0][s]=s;for(let i=1;i<=s.length;i++)for(let t=1;t<=e.length;t++)s.charAt(i-1)===e.charAt(t-1)?n[i][t]=n[i-1][t-1]:n[i][t]=Math.min(n[i-1][t-1]+1,n[i][t-1]+1,n[i-1][t]+1);return n[s.length][e.length]},x=(e,s)=>{if(!e||e.length<2)return[];let n=e.toLowerCase().trim(),i=[];return s.forEach(e=>{let s=e.name.toLowerCase(),t=e.category?.toLowerCase()||"",r=e.subcategory?.toLowerCase()||"",a=0,l="";if(s===n)a=100,l="exact";else if(s.startsWith(n))a=90,l="prefix";else if(s.includes(n))a=80,l="contains";else if(t.includes(n)||r.includes(n))a=70,l="category";else{let e=h(n,s);e<=2&&n.length>3&&(a=60-10*e,l="fuzzy")}a>0&&i.push({...e,score:a,matchType:l})}),i.sort((e,s)=>s.score-e.score).slice(0,20)};function g({availableIngredients:e,selectedIngredientId:s,onIngredientSelect:n,placeholder:r="Rechercher un ingr\xe9dient..."}){let[a,l]=(0,t.useState)(""),[c,o]=(0,t.useState)(!1),[d,u]=(0,t.useState)([]),[h,g]=(0,t.useState)(null),j=(0,t.useRef)(null),v=(0,t.useRef)(null),f=(0,t.useCallback)(s=>{if(l(s),s.length<2){u([]),o(!1);return}u(x(s,e)),o(!0)},[e]),N=e=>{g(e),l(e.name),o(!1),n(e.id)};return(0,i.jsxs)("div",{className:"ingredient-search-selector",ref:v,children:[(0,i.jsxs)("div",{className:"search-input-container",children:[i.jsx(p.Z,{className:"search-icon",size:16}),i.jsx("input",{ref:j,type:"text",value:a,onChange:e=>f(e.target.value),onFocus:()=>{a.length>=2&&o(!0)},placeholder:r,className:"search-input"}),h&&i.jsx("button",{type:"button",onClick:()=>{g(null),l(""),o(!1),n(""),j.current?.focus()},className:"clear-button",title:"Effacer la s\xe9lection",children:i.jsx(m.Z,{size:16})})]}),c&&d.length>0&&i.jsx("div",{className:"search-dropdown",children:i.jsx("div",{className:"search-results",children:d.map(e=>(0,i.jsxs)("div",{className:"search-result-item",onClick:()=>N(e),children:[(0,i.jsxs)("div",{className:"ingredient-info",children:[i.jsx("div",{className:"ingredient-name",children:e.name}),(0,i.jsxs)("div",{className:"ingredient-details",children:[e.category,e.subcategory&&` • ${e.subcategory}`]})]}),(0,i.jsxs)("div",{className:"match-indicator",children:["exact"===e.matchType&&"\uD83C\uDFAF","prefix"===e.matchType&&"\uD83D\uDCCD","contains"===e.matchType&&"\uD83D\uDD0D","category"===e.matchType&&"\uD83D\uDCC2","fuzzy"===e.matchType&&"\uD83D\uDCA1"]})]},e.id))})}),c&&a.length>=2&&0===d.length&&i.jsx("div",{className:"search-dropdown",children:i.jsx("div",{className:"no-results",children:(0,i.jsxs)("div",{className:"no-results-text",children:['Aucun ingr\xe9dient trouv\xe9 pour "',a,'"']})})})]})}function j({recipeId:e,servings:s=1}){let[n,r]=(0,t.useState)(null),[a,l]=(0,t.useState)(!0),[c,o]=(0,t.useState)(null);return a?(0,i.jsxs)("div",{className:"nutrition-facts loading",children:[i.jsx("div",{className:"loading-spinner",children:"⏳"}),i.jsx("p",{children:"Calcul des valeurs nutritionnelles..."})]}):c?(0,i.jsxs)("div",{className:"nutrition-facts error",children:[i.jsx("div",{className:"error-icon",children:"ℹ️"}),i.jsx("p",{className:"error-message",children:c}),i.jsx("p",{className:"error-hint",children:"Les donn\xe9es nutritionnelles seront disponibles une fois que les ingr\xe9dients auront \xe9t\xe9 li\xe9s \xe0 la base Ciqual."})]}):n&&0!==Object.keys(n).length?(0,i.jsxs)("div",{className:"nutrition-facts",children:[(0,i.jsxs)("div",{className:"nutrition-header",children:[i.jsx("h3",{children:"\uD83D\uDCCA Informations Nutritionnelles"}),(0,i.jsxs)("p",{className:"servings-info",children:["Par portion ",s>1&&`(\xd7${s})`]})]}),(0,i.jsxs)("div",{className:"nutrition-grid",children:[n.Calories&&(0,i.jsxs)("div",{className:"nutrient-row calories",children:[i.jsx("span",{className:"nutrient-icon",children:"\uD83D\uDD25"}),i.jsx("span",{className:"nutrient-name",children:"\xc9nergie"}),(0,i.jsxs)("span",{className:"nutrient-value",children:[i.jsx("strong",{children:n.Calories.perServing.toFixed(0)}),i.jsx("span",{className:"unit",children:n.Calories.unit})]})]}),n.Protéines&&(0,i.jsxs)("div",{className:"nutrient-row protein",children:[i.jsx("span",{className:"nutrient-icon",children:"\uD83E\uDD69"}),i.jsx("span",{className:"nutrient-name",children:"Prot\xe9ines"}),(0,i.jsxs)("span",{className:"nutrient-value",children:[i.jsx("strong",{children:n.Protéines.perServing.toFixed(1)}),i.jsx("span",{className:"unit",children:n.Protéines.unit})]})]}),n.Glucides&&(0,i.jsxs)("div",{className:"nutrient-row carbs",children:[i.jsx("span",{className:"nutrient-icon",children:"\uD83C\uDF3E"}),i.jsx("span",{className:"nutrient-name",children:"Glucides"}),(0,i.jsxs)("span",{className:"nutrient-value",children:[i.jsx("strong",{children:n.Glucides.perServing.toFixed(1)}),i.jsx("span",{className:"unit",children:n.Glucides.unit})]})]}),n.Lipides&&(0,i.jsxs)("div",{className:"nutrient-row fat",children:[i.jsx("span",{className:"nutrient-icon",children:"\uD83E\uDDC8"}),i.jsx("span",{className:"nutrient-name",children:"Lipides"}),(0,i.jsxs)("span",{className:"nutrient-value",children:[i.jsx("strong",{children:n.Lipides.perServing.toFixed(1)}),i.jsx("span",{className:"unit",children:n.Lipides.unit})]})]})]}),i.jsx("div",{className:"nutrition-total",children:(0,i.jsxs)("details",{children:[i.jsx("summary",{children:"Voir les totaux pour toute la recette"}),(0,i.jsxs)("div",{className:"total-grid",children:[n.Calories&&(0,i.jsxs)("div",{className:"total-item",children:[i.jsx("span",{children:"\xc9nergie totale:"}),(0,i.jsxs)("span",{children:[n.Calories.total.toFixed(0)," kcal"]})]}),n.Protéines&&(0,i.jsxs)("div",{className:"total-item",children:[i.jsx("span",{children:"Prot\xe9ines totales:"}),(0,i.jsxs)("span",{children:[n.Protéines.total.toFixed(1)," g"]})]}),n.Glucides&&(0,i.jsxs)("div",{className:"total-item",children:[i.jsx("span",{children:"Glucides totaux:"}),(0,i.jsxs)("span",{children:[n.Glucides.total.toFixed(1)," g"]})]}),n.Lipides&&(0,i.jsxs)("div",{className:"total-item",children:[i.jsx("span",{children:"Lipides totaux:"}),(0,i.jsxs)("span",{children:[n.Lipides.total.toFixed(1)," g"]})]})]})]})}),i.jsx("div",{className:"nutrition-disclaimer",children:i.jsx("small",{children:"⚡ Valeurs calcul\xe9es automatiquement en tenant compte de la m\xe9thode de cuisson"})})]}):i.jsx("div",{className:"nutrition-facts empty",children:i.jsx("p",{children:"Donn\xe9es nutritionnelles non disponibles"})})}function v(){let{id:e}=(0,r.useParams)();(0,r.useRouter)();let[s,n]=(0,t.useState)(null),[l,c]=(0,t.useState)([]),[p,m]=(0,t.useState)({}),[h,x]=(0,t.useState)({}),[v,f]=(0,t.useState)({}),[N,b]=(0,t.useState)(!0),[_,D]=(0,t.useState)(!1),[y,C]=(0,t.useState)(""),[k,w]=(0,t.useState)(!1),[q,S]=(0,t.useState)("basic"),[P,I]=(0,t.useState)({}),[A,E]=(0,t.useState)([]),[M,L]=(0,t.useState)([]),[R,$]=(0,t.useState)([]),[F,T]=(0,t.useState)(!0);async function z(){try{console.log("\uD83D\uDD0D Chargement des ingr\xe9dients disponibles...");let{data:e,error:s}=await a.OQ.from("canonical_foods").select("id, name, category, subcategory").order("category",{ascending:!0}).order("name",{ascending:!0});if(s)throw console.error("❌ Erreur Supabase:",s),s;console.log("✅ Ingr\xe9dients charg\xe9s:",e?.length||0,"ingr\xe9dients"),console.log("\uD83D\uDCCB Premiers ingr\xe9dients:",e?.slice(0,5)),$(e||[])}catch(e){console.error("❌ Erreur chargement ingr\xe9dients:",e);try{let{data:e,error:s}=await a.OQ.from("canonical_foods").select("*").limit(10);console.log("\uD83D\uDD04 Tentative fallback:",e),!s&&e&&$(e)}catch(e){console.error("❌ Fallback \xe9chou\xe9:",e)}}}function G(e,s,n){L(i=>{let t=[...i];return t[e]={...t[e],[s]:n},t})}function O(e,s,n){E(i=>{let t=[...i];if(t[e]={...t[e],[s]:n},"canonical_food_id"===s){let s=R.find(e=>e.id===parseInt(n));s&&(t[e].canonical_food_name=s.name)}return t})}async function Z(){try{D(!0);let s=M.filter(e=>e.text.trim()).map((e,s)=>`${s+1}. ${e.text.trim()}`).join("\n\n"),n={name:P.name,description:P.description,short_description:P.short_description,prep_min:parseInt(P.prep_min)||0,cook_min:parseInt(P.cook_min)||0,rest_min:parseInt(P.rest_min)||0,servings:parseInt(P.servings)||4,instructions:s,chef_tips:P.chef_tips,is_vegetarian:P.is_vegetarian,is_vegan:P.is_vegan,is_gluten_free:P.is_gluten_free,updated_at:new Date().toISOString()},{error:i}=await a.OQ.from("recipes").update(n).eq("id",e);if(i)throw i;let{error:t}=await a.OQ.from("recipe_ingredients").delete().eq("recipe_id",e);if(t)throw t;let r=A.filter(e=>e.canonical_food_id&&e.quantity>0).map(s=>({recipe_id:parseInt(e),canonical_food_id:parseInt(s.canonical_food_id),quantity:parseFloat(s.quantity),unit:s.unit,notes:s.notes||null,created_at:new Date().toISOString()}));if(r.length>0){let{error:e}=await a.OQ.from("recipe_ingredients").insert(r);if(e)throw e}window.location.reload()}catch(e){console.error("Erreur sauvegarde:",e),alert(`Erreur lors de la sauvegarde: ${e.message}`)}finally{D(!1)}}if((0,t.useMemo)(()=>{let e={};for(let s of l){let n=s.product_id,i=(s.unit||s.product?.default_unit||"g").toLowerCase(),t=Number(s.qty||0),r=h[n]||{},a=0,l=v[n]||{};for(let e of p[n]||[]){let s=l[e.id];if(!s?.checked)continue;let n=Number(s.qty||0);n>0&&(a+=function e(s,n,i,t={}){let r=Number(t.density_g_per_ml??1),a=Number(t.grams_per_unit??0),l=o(n),c=o(i);return l&&c?l===c?{qty:u(d(s,n),i),unit:i}:"count"===l&&"mass"===c&&a>0?{qty:u(s*a,i),unit:i}:"mass"===l&&"count"===c&&a>0?{qty:u(d(s,n)/a,i),unit:i}:"vol"===l&&"mass"===c?{qty:u(d(s,n)*r,i),unit:i}:"mass"===l&&"vol"===c?{qty:u(d(s,n)/r,i),unit:i}:"count"===l&&"vol"===c&&a>0?e(s*a,"g",i,{density_g_per_ml:r,grams_per_unit:a}):"vol"===l&&"count"===c&&a>0?e(s,n,"g",{density_g_per_ml:r,grams_per_unit:a})&&e(u(d(s,n)*r,"g").qty,"g","u",{grams_per_unit:a}):{qty:s,unit:n}:{qty:s,unit:i}}(n,s.unit||e.unit,i,r).qty)}e[n]={needQty:t,needUnit:i,covered:a,ok:a+1e-9>=t||s.optional}}return e},[l,v,p,h]),N)return i.jsx("div",{className:"recipe-detail-container",children:i.jsx("div",{className:"loading-spinner",style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh",fontSize:"1.2rem",color:"#374151"},children:"Chargement de la recette..."})});if(y)return i.jsx("div",{className:"recipe-detail-container",children:(0,i.jsxs)("div",{className:"error-message",style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[i.jsx("h2",{style:{color:"#dc2626"},children:"Erreur"}),i.jsx("p",{children:y}),i.jsx("button",{onClick:()=>window.history.back(),style:{padding:"10px 20px",background:"#dc2626",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"← Retour"})]})});if(!s)return i.jsx("div",{className:"recipe-detail-container",children:(0,i.jsxs)("div",{className:"error-message",style:{background:"rgba(107, 114, 128, 0.1)",border:"1px solid rgba(107, 114, 128, 0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[i.jsx("h2",{children:"Recette introuvable"}),(0,i.jsxs)("p",{children:["Aucune recette trouv\xe9e avec l'ID: ",e]}),i.jsx("button",{onClick:()=>window.history.back(),style:{padding:"10px 20px",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"← Retour aux recettes"})]})});let Q=(s.prep_min||0)+(s.cook_min||0)+(s.rest_min||0);return k?(0,i.jsxs)("div",{className:"recipes-container",children:[(0,i.jsxs)("div",{className:"edit-header-bar",children:[(0,i.jsxs)("h1",{children:['✏️ \xc9dition de "',s.title,'"']}),(0,i.jsxs)("div",{className:"edit-actions",children:[i.jsx("button",{className:"btn-tertiary",onClick:()=>{console.log("\uD83D\uDCCA \xc9tat actuel:"),console.log("- Ingr\xe9dients disponibles:",R.length),console.log("- Premiers ingr\xe9dients:",R.slice(0,3)),alert(`${R.length} ingr\xe9dients charg\xe9s (voir console)`)},children:"\uD83D\uDD0D Test donn\xe9es"}),i.jsx("button",{className:"btn-primary",onClick:Z,disabled:_,children:_?"⏳ Sauvegarde...":"\uD83D\uDCBE Sauvegarder"}),i.jsx("button",{className:"btn-secondary",onClick:function(){w(!1),I({}),E([]),L([])},children:"❌ Annuler"})]})]}),(0,i.jsxs)("div",{className:"edit-tabs",children:[i.jsx("button",{className:`tab-btn ${"basic"===q?"active":""}`,onClick:()=>S("basic"),children:"\uD83D\uDCDD Informations"}),i.jsx("button",{className:`tab-btn ${"ingredients"===q?"active":""}`,onClick:()=>S("ingredients"),children:"\uD83E\uDD55 Ingr\xe9dients"}),i.jsx("button",{className:`tab-btn ${"instructions"===q?"active":""}`,onClick:()=>S("instructions"),children:"\uD83D\uDCCB Instructions"}),i.jsx("button",{className:`tab-btn ${"nutrition"===q?"active":""}`,onClick:()=>S("nutrition"),children:"\uD83D\uDCCA Nutrition"})]}),(0,i.jsxs)("div",{className:"edit-content",children:["basic"===q&&(0,i.jsxs)("div",{className:"edit-section",children:[i.jsx("h2",{children:"\uD83D\uDCDD Informations g\xe9n\xe9rales"}),(0,i.jsxs)("div",{className:"form-grid",children:[(0,i.jsxs)("div",{className:"form-group",children:[i.jsx("label",{children:"Nom de la recette *"}),i.jsx("input",{type:"text",value:P.name||"",onChange:e=>I(s=>({...s,name:e.target.value})),placeholder:"Ex: Ratatouille proven\xe7ale",required:!0})]}),(0,i.jsxs)("div",{className:"form-group",children:[i.jsx("label",{children:"Description courte"}),i.jsx("input",{type:"text",value:P.short_description||"",onChange:e=>I(s=>({...s,short_description:e.target.value})),placeholder:"Ex: Mijot\xe9 de l\xe9gumes du soleil"})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[i.jsx("label",{children:"Description compl\xe8te"}),i.jsx("textarea",{value:P.description||"",onChange:e=>I(s=>({...s,description:e.target.value})),placeholder:"D\xe9crivez la recette, son origine, ses sp\xe9cificit\xe9s...",rows:"4"})]}),(0,i.jsxs)("div",{className:"form-grid",children:[(0,i.jsxs)("div",{className:"form-group",children:[i.jsx("label",{children:"Temps de pr\xe9paration (min)"}),i.jsx("input",{type:"number",min:"0",value:P.prep_min||"",onChange:e=>I(s=>({...s,prep_min:e.target.value}))})]}),(0,i.jsxs)("div",{className:"form-group",children:[i.jsx("label",{children:"Temps de cuisson (min)"}),i.jsx("input",{type:"number",min:"0",value:P.cook_min||"",onChange:e=>I(s=>({...s,cook_min:e.target.value}))})]}),(0,i.jsxs)("div",{className:"form-group",children:[i.jsx("label",{children:"Temps de repos (min)"}),i.jsx("input",{type:"number",min:"0",value:P.rest_min||"",onChange:e=>I(s=>({...s,rest_min:e.target.value}))})]}),(0,i.jsxs)("div",{className:"form-group",children:[i.jsx("label",{children:"Portions"}),i.jsx("input",{type:"number",min:"1",value:P.servings||"",onChange:e=>I(s=>({...s,servings:e.target.value}))})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[i.jsx("label",{children:"R\xe9gimes alimentaires"}),(0,i.jsxs)("div",{className:"checkboxes-group",children:[(0,i.jsxs)("label",{className:"checkbox-label",children:[i.jsx("input",{type:"checkbox",checked:P.is_vegetarian||!1,onChange:e=>I(s=>({...s,is_vegetarian:e.target.checked}))}),"\uD83E\uDD6C V\xe9g\xe9tarien"]}),(0,i.jsxs)("label",{className:"checkbox-label",children:[i.jsx("input",{type:"checkbox",checked:P.is_vegan||!1,onChange:e=>I(s=>({...s,is_vegan:e.target.checked}))}),"\uD83C\uDF31 Vegan"]}),(0,i.jsxs)("label",{className:"checkbox-label",children:[i.jsx("input",{type:"checkbox",checked:P.is_gluten_free||!1,onChange:e=>I(s=>({...s,is_gluten_free:e.target.checked}))}),"\uD83C\uDF3E Sans gluten"]})]})]})]}),"ingredients"===q&&(0,i.jsxs)("div",{className:"edit-section",children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("h2",{children:"\uD83E\uDD55 Ingr\xe9dients"}),i.jsx("button",{className:"add-btn",onClick:function(){E(e=>[...e,{id:Math.random(),canonical_food_id:"",canonical_food_name:"",quantity:0,unit:"g",notes:""}])},children:"+ Ajouter un ingr\xe9dient"})]}),(0,i.jsxs)("div",{className:"ingredients-list",children:[A.map((e,s)=>(0,i.jsxs)("div",{className:"ingredient-row",children:[i.jsx(g,{availableIngredients:R,selectedIngredientId:e.canonical_food_id,onIngredientSelect:e=>O(s,"canonical_food_id",e),placeholder:"Rechercher un ingr\xe9dient..."}),i.jsx("input",{type:"number",step:"0.1",min:"0",value:e.quantity||"",onChange:e=>O(s,"quantity",e.target.value),placeholder:"Qt\xe9"}),(0,i.jsxs)("select",{value:e.unit||"g",onChange:e=>O(s,"unit",e.target.value),children:[i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"l",children:"l"}),i.jsx("option",{value:"unit\xe9",children:"unit\xe9"}),i.jsx("option",{value:"c.\xe0.s",children:"c.\xe0.s"}),i.jsx("option",{value:"c.\xe0.c",children:"c.\xe0.c"}),i.jsx("option",{value:"pinc\xe9e",children:"pinc\xe9e"})]}),i.jsx("input",{type:"text",value:e.notes||"",onChange:e=>O(s,"notes",e.target.value),placeholder:"Notes (optionnel)"}),i.jsx("button",{className:"remove-btn",onClick:()=>{E(e=>e.filter((e,n)=>n!==s))},title:"Supprimer cet ingr\xe9dient",children:"\uD83D\uDDD1️"})]},e.id)),0===A.length&&i.jsx("div",{className:"empty-ingredients",children:i.jsx("p",{children:'Aucun ingr\xe9dient ajout\xe9. Cliquez sur "Ajouter un ingr\xe9dient" pour commencer.'})})]})]}),"instructions"===q&&(0,i.jsxs)("div",{className:"edit-section",children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsx("h2",{children:"\uD83D\uDCCB Instructions"}),i.jsx("button",{className:"add-btn",onClick:function(){L(e=>[...e,{id:Math.random(),text:"",duration:"",type:"preparation"}])},children:"+ Ajouter une \xe9tape"})]}),(0,i.jsxs)("div",{className:"instructions-list",children:[M.map((e,s)=>(0,i.jsxs)("div",{className:"instruction-block",children:[(0,i.jsxs)("div",{className:"instruction-header",children:[(0,i.jsxs)("div",{className:"step-number",children:["\xc9tape ",s+1]}),i.jsx("button",{className:"remove-btn",onClick:()=>{L(e=>e.filter((e,n)=>n!==s))},title:"Supprimer cette \xe9tape",children:"\uD83D\uDDD1️"})]}),i.jsx("textarea",{value:e.text||"",onChange:e=>G(s,"text",e.target.value),placeholder:`D\xe9crivez l'\xe9tape ${s+1} en d\xe9tail...`,rows:"3"}),(0,i.jsxs)("div",{className:"instruction-meta",children:[i.jsx("input",{type:"number",min:"0",value:e.duration||"",onChange:e=>G(s,"duration",e.target.value),placeholder:"Temps (min)",style:{width:"120px"}}),(0,i.jsxs)("select",{value:e.type||"preparation",onChange:e=>G(s,"type",e.target.value),style:{width:"150px"},children:[i.jsx("option",{value:"preparation",children:"Pr\xe9paration"}),i.jsx("option",{value:"cooking",children:"Cuisson"}),i.jsx("option",{value:"resting",children:"Repos"}),i.jsx("option",{value:"assembly",children:"Assemblage"})]})]})]},e.id)),0===M.length&&i.jsx("div",{className:"empty-instructions",children:i.jsx("p",{children:'Aucune \xe9tape ajout\xe9e. Cliquez sur "Ajouter une \xe9tape" pour commencer.'})})]}),(0,i.jsxs)("div",{className:"form-group",children:[i.jsx("label",{children:"\uD83D\uDCA1 Conseils du chef (optionnel)"}),i.jsx("textarea",{value:P.chef_tips||"",onChange:e=>I(s=>({...s,chef_tips:e.target.value})),placeholder:"Astuces, variations, conseils de pr\xe9sentation...",rows:"3"})]})]}),"nutrition"===q&&(0,i.jsxs)("div",{className:"edit-section",children:[i.jsx("h2",{children:"\uD83D\uDCCA Informations nutritionnelles"}),i.jsx("p",{style:{color:"#6b7280",fontStyle:"italic",marginBottom:"20px"},children:"Les informations nutritionnelles seront calcul\xe9es automatiquement selon les ingr\xe9dients ajout\xe9s. Cette section sera d\xe9velopp\xe9e dans une prochaine version."}),i.jsx("div",{className:"form-grid",children:(0,i.jsxs)("div",{className:"form-group",children:[i.jsx("label",{children:"Score Myko estim\xe9"}),i.jsx("input",{type:"number",min:"0",max:"100",value:s.myko_score||"",placeholder:"Sera calcul\xe9 automatiquement",disabled:!0})]})})]})]})]}):(0,i.jsxs)("div",{className:"recipe-detail-container",children:[(0,i.jsxs)("div",{className:"recipe-header",children:[i.jsx("button",{onClick:()=>window.history.back(),className:"back-button",children:"← Retour aux recettes"}),(0,i.jsxs)("div",{className:"recipe-title-section",children:[i.jsx("h1",{className:"recipe-title",children:s.title}),i.jsx("div",{className:"recipe-badges",children:(0,i.jsxs)("span",{className:`myko-score ${s.myko_score>=80?"high-score":"medium-score"}`,children:[s.myko_score,"★ Myko"]})})]}),s.description&&i.jsx("p",{className:"recipe-description",children:s.description})]}),(0,i.jsxs)("div",{className:"recipe-content",children:[(0,i.jsxs)("div",{className:"recipe-info-cards",children:[(0,i.jsxs)("div",{className:"info-card",children:[i.jsx("div",{className:"info-icon",children:"⏱️"}),(0,i.jsxs)("div",{className:"info-content",children:[i.jsx("div",{className:"info-label",children:"Temps total"}),(0,i.jsxs)("div",{className:"info-value",children:[Q," min"]}),(0,i.jsxs)("div",{className:"info-details",children:[s.prep_min>0&&`Prep: ${s.prep_min}min`,s.cook_min>0&&` • Cuisson: ${s.cook_min}min`,s.rest_min>0&&` • Repos: ${s.rest_min}min`]})]})]}),(0,i.jsxs)("div",{className:"info-card",children:[i.jsx("div",{className:"info-icon",children:"\uD83D\uDC65"}),(0,i.jsxs)("div",{className:"info-content",children:[i.jsx("div",{className:"info-label",children:"Portions"}),i.jsx("div",{className:"info-value",children:s.servings||"Non d\xe9fini"})]})]}),(0,i.jsxs)("div",{className:"info-card",children:[i.jsx("div",{className:"info-icon",children:"\uD83D\uDCCA"}),(0,i.jsxs)("div",{className:"info-content",children:[i.jsx("div",{className:"info-label",children:"Score Myko"}),(0,i.jsxs)("div",{className:"info-value",children:[s.myko_score,"/100"]})]})]}),(0,i.jsxs)("div",{className:"info-card",children:[i.jsx("div",{className:"info-icon",children:"\uD83C\uDF31"}),(0,i.jsxs)("div",{className:"info-content",children:[i.jsx("div",{className:"info-label",children:"R\xe9gime"}),i.jsx("div",{className:"info-value",children:s.is_vegan?"Vegan":s.is_vegetarian?"V\xe9g\xe9tarien":"Omnivore"})]})]})]}),(0,i.jsxs)("div",{className:"recipe-body",children:[(0,i.jsxs)("div",{className:"ingredients-section",children:[(0,i.jsxs)("h2",{children:["Ingr\xe9dients (",l.length,")"]}),l.length>0?i.jsx("ul",{className:"ingredients-list",children:l.map((e,s)=>{var n;let t=e.name||e.canonical_foods?.name||"Ingr\xe9dient inconnu",r=e.canonical_food_id||e.archetype_id,a=r?`/produits/${r}`:null;return(0,i.jsxs)("li",{className:"ingredient-item",children:[(0,i.jsxs)("span",{className:"ingredient-quantity",children:[(n=e.quantity,(e.unit||"").toLowerCase(),Math.round(100*Number(n))/100)," ",e.unit]}),a?i.jsx("a",{href:a,className:"ingredient-name ingredient-link",style:{color:"#059669",textDecoration:"none",cursor:"pointer",transition:"color 0.2s"},onMouseEnter:e=>e.target.style.color="#047857",onMouseLeave:e=>e.target.style.color="#059669",children:t}):i.jsx("span",{className:"ingredient-name",children:t}),e.notes&&(0,i.jsxs)("span",{className:"ingredient-notes",children:["(",e.notes,")"]})]},e.id||s)})}):i.jsx("p",{className:"no-ingredients",style:{color:"#6b7280",fontStyle:"italic"},children:"Aucun ingr\xe9dient d\xe9fini pour cette recette."}),i.jsx(j,{recipeId:parseInt(e),servings:1})]}),(0,i.jsxs)("div",{className:"instructions-section",children:[i.jsx("h2",{children:"Instructions"}),i.jsx("div",{className:"instructions-content",children:s.steps?i.jsx("p",{className:"instructions-text",children:s.steps}):i.jsx("p",{style:{color:"#6b7280",fontStyle:"italic"},children:"Instructions non disponibles"})}),s.chef_tips&&(0,i.jsxs)("div",{className:"chef-tips",children:[i.jsx("h3",{children:"\uD83D\uDCA1 Conseils du chef"}),i.jsx("p",{children:s.chef_tips})]})]})]}),(0,i.jsxs)("div",{className:"recipe-actions",children:[i.jsx("button",{className:"action-btn primary",children:"\uD83D\uDCC5 Planifier cette recette"}),i.jsx("button",{className:"action-btn secondary",children:"\uD83D\uDED2 Ajouter aux courses"}),i.jsx("button",{className:"action-btn tertiary",onClick:function(){I({name:s.title||"",description:s.description||"",short_description:s.short_description||"",prep_min:s.prep_min||0,cook_min:s.cook_min||0,rest_min:s.rest_min||0,servings:s.servings||4,chef_tips:s.chef_tips||"",is_vegetarian:s.is_vegetarian||!1,is_vegan:s.is_vegan||!1,is_gluten_free:s.is_gluten_free||!1});let e=(s.steps||"").split(/\n+/).filter(e=>e.trim());L(e.map((e,s)=>({id:Math.random(),text:e.replace(/^\d+\.\s*/,""),duration:"",type:"preparation"}))),0===e.length&&L([{id:Math.random(),text:"",duration:"",type:"preparation"}]),E(l.map(e=>({id:e.id||Math.random(),canonical_food_id:e.canonical_food_id||"",canonical_food_name:e.canonical_foods?.name||"",quantity:e.quantity||0,unit:e.unit||"g",notes:e.notes||""}))),z(),w(!0)},children:"\uD83D\uDCDD Modifier la recette"})]})]})]})}n(7873),n(7005),n(400)},8307:(e,s,n)=>{"use strict";n.d(s,{Z:()=>i});let i=(0,n(2881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},4019:(e,s,n)=>{"use strict";n.d(s,{Z:()=>i});let i=(0,n(2881).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1694:(e,s,n)=>{"use strict";n.r(s),n.d(s,{$$typeof:()=>a,__esModule:()=>r,default:()=>l});var i=n(8570);let t=(0,i.createProxy)(String.raw`/workspaces/garde-manger-app/app/recipes/[id]/page.js`),{__esModule:r,$$typeof:a}=t;t.default;let l=(0,i.createProxy)(String.raw`/workspaces/garde-manger-app/app/recipes/[id]/page.js#default`)},400:()=>{},7005:()=>{},7873:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var n=e=>s(s.s=e),i=s.X(0,[948,618,146],()=>n(2392));module.exports=i})();