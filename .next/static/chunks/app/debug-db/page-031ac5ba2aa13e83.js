(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[456],{6843:function(e,s,n){Promise.resolve().then(n.bind(n,635))},635:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return l}});var t=n(7437),i=n(2265),r=n(5626);function l(){let[e,s]=(0,i.useState)([]),[n,l]=(0,i.useState)([]),[o,c]=(0,i.useState)(null),[a,u]=(0,i.useState)([]);async function d(){try{for(let e of(console.log("Test de connexion \xe0 Supabase..."),[{name:"Toutes colonnes",query:r.OQ.from("recipes").select("*").limit(5)},{name:"Colonnes basiques",query:r.OQ.from("recipes").select("id, title, name").limit(5)},{name:"Sans limite",query:r.OQ.from("recipes").select("id, title").limit(1)}])){console.log("Test: ".concat(e.name));let{data:s,error:n}=await e.query;if(n)console.error("Erreur ".concat(e.name,":"),n),c(n.message);else if(console.log("Succ\xe8s ".concat(e.name,":"),s),s&&s.length>0){l(s),u(Object.keys(s[0]));break}}let{data:e}=await r.OQ.from("recipe_categories").select("*").limit(3),{data:t}=await r.OQ.from("cuisine_types").select("*").limit(3),{data:i}=await r.OQ.from("inventory_lots").select("*").limit(3),{data:o}=await r.OQ.from("canonical_foods").select("*").limit(3);s([{name:"recipes",count:n.length,sample:n[0]},{name:"recipe_categories",count:(null==e?void 0:e.length)||0,sample:null==e?void 0:e[0]},{name:"cuisine_types",count:(null==t?void 0:t.length)||0,sample:null==t?void 0:t[0]},{name:"inventory_lots",count:(null==i?void 0:i.length)||0,sample:null==i?void 0:i[0]},{name:"canonical_foods",count:(null==o?void 0:o.length)||0,sample:null==o?void 0:o[0]}])}catch(e){console.error("Erreur lors du test de la base:",e),c(e.message)}}async function m(){try{let{data:e,error:s}=await r.OQ.from("recipes").insert({title:"Recette de Test",name:"Recette de Test",slug:"recette-test",description:"Une recette de test pour v\xe9rifier l'insertion",prep_min:15,cook_min:30,rest_min:0,servings:4,myko_score:75,instructions:"Instructions de test",is_active:!0}).select();s?(console.error("Erreur insertion:",s),alert("Erreur: ".concat(s.message))):(console.log("Recette ins\xe9r\xe9e:",e),alert("Recette ins\xe9r\xe9e avec succ\xe8s!"),d())}catch(e){console.error("Erreur:",e),alert("Erreur: ".concat(e.message))}}return(0,i.useEffect)(()=>{d()},[]),(0,t.jsxs)("div",{style:{padding:"20px",fontFamily:"monospace"},children:[(0,t.jsx)("h1",{children:"D\xe9bogage Base de Donn\xe9es"}),(0,t.jsxs)("section",{style:{marginBottom:"30px"},children:[(0,t.jsx)("h2",{children:"Connexion Supabase"}),(0,t.jsxs)("p",{children:["URL: ","https://yylkwfikfbottngglaxj.supabase.co"]}),(0,t.jsxs)("p",{children:["Cl\xe9: ","D\xe9finie"]})]}),(0,t.jsxs)("section",{style:{marginBottom:"30px"},children:[(0,t.jsx)("h2",{children:"Tables disponibles"}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px"},children:e.map((e,s)=>(0,t.jsxs)("div",{style:{border:"1px solid #ccc",padding:"10px",borderRadius:"5px"},children:[(0,t.jsx)("h3",{children:e.name}),(0,t.jsxs)("p",{children:["Nombre d'enregistrements: ",e.count]}),e.sample&&(0,t.jsxs)("details",{children:[(0,t.jsx)("summary",{children:"\xc9chantillon"}),(0,t.jsx)("pre",{style:{fontSize:"11px",overflow:"auto"},children:JSON.stringify(e.sample,null,2)})]})]},s))})]}),(0,t.jsxs)("section",{style:{marginBottom:"30px"},children:[(0,t.jsx)("h2",{children:"Recettes trouv\xe9es"}),o&&(0,t.jsxs)("p",{style:{color:"red"},children:["Erreur: ",o]}),(0,t.jsxs)("p",{children:["Nombre: ",n.length]}),a.length>0&&(0,t.jsxs)("details",{children:[(0,t.jsx)("summary",{children:"Colonnes disponibles dans recipes"}),(0,t.jsx)("ul",{children:a.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]}),n.length>0&&(0,t.jsxs)("details",{children:[(0,t.jsx)("summary",{children:"Premi\xe8re recette"}),(0,t.jsx)("pre",{style:{fontSize:"11px",overflow:"auto"},children:JSON.stringify(n[0],null,2)})]})]}),(0,t.jsxs)("section",{children:[(0,t.jsx)("h2",{children:"Actions"}),(0,t.jsx)("button",{onClick:d,style:{marginRight:"10px",padding:"10px"},children:"Recharger"}),(0,t.jsx)("button",{onClick:m,style:{padding:"10px"},children:"Ins\xe9rer recette de test"})]})]})}},5626:function(e,s,n){"use strict";n.d(s,{OQ:function(){return l}});var t=n(6887);let i="https://yylkwfikfbottngglaxj.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl5bGt3ZmlrZmJvdHRuZ2dsYXhqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY1NjUwNzAsImV4cCI6MjA3MjE0MTA3MH0.h-GTmBH9onVHNJLLuafw9jwS9G8azVaQGelf-oUK-xc",l=null;if(i&&r)try{console.log("\uD83D\uDD17 Connexion \xe0 Supabase r\xe9el:",i),l=(0,t.eI)(i,r,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}catch(e){console.error("[Supabase] Erreur lors de la cr\xe9ation du client",e instanceof Error?e:Error(String(e)))}else{let e=[!i&&"NEXT_PUBLIC_SUPABASE_URL",!r&&"NEXT_PUBLIC_SUPABASE_ANON_KEY"].filter(Boolean);Error("Supabase non configur\xe9. Variables manquantes: ".concat(e.join(", ")))}}},function(e){e.O(0,[887,971,23,744],function(){return e(e.s=6843)}),_N_E=e.O()}]);